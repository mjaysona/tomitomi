---
import { Article } from '@/interfaces/articles';
import Icon from 'astro-icon';
import TagGroup from './TagGroup.astro';

let articles = await Astro.glob<Article>("../articles/*.md");

articles = articles.sort((a, b) => {
  return new Date(b.frontmatter.pubDate).valueOf()
    - new Date(a.frontmatter.pubDate).valueOf()
});

const {
  Content,
  frontmatter: {
    tags,
    pubDate,
  }
} = articles[0];
---

<div class="article">
  <div class="article__head">
    <div>
      <span>Tags: </span>
      <TagGroup tags={tags} size="md"/>
    </div>
    <span>{pubDate}</span>
  </div>
  <div class="content">
    <Content />
  </div>
  <div class="expand">
    <div><Icon name="akar-icons:circle-chevron-down-fill" /></div>
  </div>
</div>
<style lang="scss">
  @import '../styles/variables.scss';

  div.article {
    position: relative;
    h1 {
      color: $primary-color;
      margin: 12px 0 24px;
    }
    .article__head {
      color: $gray-lighter;
      display: flex;
      justify-content: space-between;
      padding-bottom: 16px;
      > div >  span {
        margin-right: 8px;
      }
    }
    .content {
      height: 280px;
      overflow: hidden;
    }
    .expand {
      align-items: end;
      bottom: 0;
      display: flex;
      height: 140px;
      justify-content: center;
      position: absolute;
      width: 100%;
      background: -moz-linear-gradient(top,  rgba(251,251,251,0) 0%, rgba(251,251,251,1) 100%); /* FF3.6-15 */
      background: -webkit-linear-gradient(top,  rgba(251,251,251,0) 0%,rgba(251,251,251,1) 100%); /* Chrome10-25,Safari5.1-6 */
      background: linear-gradient(to bottom,  rgba(251,251,251,0) 0%,rgba(251,251,251,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
      > div {
        color: $primary-color;
        cursor: pointer;
        height: 40px;
        width: 40px;
        position: relative;
        top: 20px;
      }
    }
  }
</style>
